var Contexto2017=function(){};Contexto2017.prototype=function(){var q=7091;var o=20261;var n=40522;var k=80640;var i=0.145;var A=0.285;var E=0.37;var l=0.45;var C=0.48;var u=1028.2;var y=3753.45;var F=7496.57;var c=18053.1;var g=0.025;var e=0.05;var a=80000;var G=250000;var b=4250;var t=0.0088;var s=0.0275;var r=0.0321;var v=178.3;var x=1103.25;var j=4104;var B=0.75;var D=725;var h=600;var f=635;var z=525;var p=475;var d=421.32;var w=d*1.5*14;var m=10000;algoritmo=function(){var J=parseFloat(rendimentoDependente)+parseFloat(rendimentoIndependente)+parseFloat(rendimentoCapital)+parseFloat(rendimentoPredial)+parseFloat(rendimentoPensoes);console.log("Rendimento Total: "+J);var H=calcRendColectavel();console.log("Rendimento Colectavel: "+H);var P=calcTaxaSolidariedadeDevida(H);console.log("Imposto Solidariedade: "+P);var I=calcQuocienteFamiliar();console.log("Quociente Familiar: "+I);var K=H/I;console.log("Rendimento Colectavel Corrigido: "+K);var M=calcImposto(K);console.log("Imposto Apurado: "+M);var Q=M*I;console.log("Colecta Total: "+Q);var L=Q+P;console.log("Colecta Apurada Total: "+L);var N=calcDeducoesTotal(H);console.log("Deducoes a Colecta: "+N);var O=calcColectaLiquida(L,N);console.log("Imposto Final: "+O);if(O<0){O=0}$("#impostoAPagar").val(O.formatMoney(2)+" €");$("#taxaEfectiva").val(((O/J)*100).toFixed(2)+" %");$("#totalLiquido").val((J-O).formatMoney(2)+" €");return O},calcRendColectavel=function(){return calcRendColectavelCatA(rendimentoDependente)+calcRendColectavelCatB(rendimentoIndependente)+calcRendColectavelCatE(rendimentoCapital)+calcRendColectavelCatF(rendimentoPredial)+calcRendColectavelCatH(rendimentoPensoes)},calcRendColectavelCatA=function(H){if(H<=j){return 0}else{return parseFloat(H)-j}},calcRendColectavelCatB=function(J){if(J<=0){return 0}else{H=parseFloat(J);if(propriedadeIntelectual){var H=0;var I=J*0.5;if(I>m){I=m}H=parseFloat(J)-I}return H*B}},calcRendColectavelCatE=function(I){perdasCapitais=0;if(I<=0){return 0}else{var H=parseFloat(I)-parseFloat(perdasCapitais);if(H<0){return 0}else{return H}}},calcRendColectavelCatF=function(I){if(I<=0){return 0}else{var H=I-condominios-obras-impostoMunicipalImoveis;if(H<=0){return 0}else{return H}}},calcRendColectavelCatH=function(H){if(H<=j){return 0}else{return parseFloat(H)-j}},calcTaxaSolidariedadeDevida=function(I){var H;if(I>a&&I<=G){console.log("Taxa de Solidariedade 1");H=(I-a)*g;console.log(H);return H}else{if(I>G){console.log("Taxa de Solidariedade 2");H=((I-G)*e)+b;console.log(H);return H}else{return 0}}},calcQuocienteFamiliar=function(){return numContribuintes},calcImposto=function(I){var H;if(I<=0){console.log("Nao paga imposto");return 0}if(I<=q){console.log("escalao1");H=(I*i);console.log(H);return H}else{if(I>q&&I<=o){console.log("escalao2");H=(((I-q)*A)+u);console.log(H);return H}else{if(I>o&&I<=n){console.log("escalao3");H=(((I-o)*(E+t))+u+y);return H}else{if(I>n&&I<=k){console.log("escalao4");H=(((I-n)*(l+s))+u+y+F+v);return H}else{if(I>k){console.log("escalao5");H=(((I-k)*(C+r))+u+y+F+c+v+x);return H}}}}}},calcDeducoesTotal=function(I){var J=calcDespesasSaude(despesasSaude);var L=calcDespesasEducacao(despesasEducacao);var N=calcDespesasIVA(despesasIVA);var K=calcDespesasGerais(despesasGerais);var M=calcDeducoesDependentes();var O=calcDeducoesAscendentes();var P=calcLimiteDeducoes(I);var H=J+L+N;if(H>P&&P>0){H=P}return K+M+O+H},calcDespesasSaude=function(J){var K=0.15;var I=1000;var H=J*K;if(H<I){return H}else{return I}},calcDespesasEducacao=function(K){var J=0.3;var I=800;var H=K*J;if(H<I){return H}else{return I}},calcDespesasGerais=function(I){var K=0.35;var J=0.45;var L=250;var M=335;var H;if(familiaMonoparental){H=I*J;if(H<M){return H}else{return M}}else{H=I*K;if(H<(L*numContribuintes)){return H}else{return L*numContribuintes}}},calcDespesasIVA=function(J){var K=0.15;var I=250;var H=J*K;if(H<I){return H}else{return I}},calcDeducoesDependentes=function(){var I=dependentes3Anos*D;var H=dependentes*h;return I+H},calcDeducoesAscendentes=function(){if(ascendentes>1){return z*ascendentes}else{return f*ascendentes}},calcLimiteDeducoes=function(I){var H=-1;if(I<=q){return H}else{if(I>q&&I<=k){H=1000+(1500*(k-I))/(k-q)}else{H=1000}}if(dependentes>=3){H+=H*(0.05*dependentes)}return H},calcColectaLiquida=function(I,H){return I-H};return{algoritmo:algoritmo}}();