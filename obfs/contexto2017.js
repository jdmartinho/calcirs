var Contexto2017=function(){};Contexto2017.prototype=function(){var q=7091;var o=20261;var n=40522;var k=80640;var i=0.145;var B=0.285;var F=0.37;var l=0.45;var D=0.48;var v=1028.2;var z=3753.45;var G=7496.57;var c=18053.1;var g=0.025;var e=0.05;var a=80000;var I=250000;var b=4250;var u=0.0088;var t=0.0275;var s=0.0321;var w=178.3;var y=1103.25;var j=4104;var C=0.75;var E=725;var h=600;var f=635;var A=525;var p=475;var d=421.32;var x=8500;var r=11320;var H=15560;var m=10000;algoritmo=function(){var L=parseFloat(rendimentoDependente)+parseFloat(rendimentoIndependente)+parseFloat(rendimentoCapital)+parseFloat(rendimentoPredial)+parseFloat(rendimentoPensoes);console.log("Rendimento Total: "+L);var J=calcRendColectavel();console.log("Rendimento Colectavel: "+J);var T=calcTaxaSolidariedadeDevida(J);console.log("Imposto Solidariedade: "+T);var K=calcQuocienteFamiliar();console.log("Quociente Familiar: "+K);var N=J/K;console.log("Rendimento Colectavel Corrigido: "+N);var Q=calcImposto(N);console.log("Imposto Apurado: "+Q);var U=Q*K;console.log("Colecta Total: "+U);var P=U+T;console.log("Colecta Apurada Total: "+P);var R=calcDeducoesTotal(J);console.log("Deducoes a Colecta: "+R);var S=calcColectaLiquida(P,R);console.log("Imposto Final: "+S);if(S<0){S=0}if(rendimentoCapital==0&&rendimentoPredial==0&&rendimentoIndependente==0){var O=dependentes+dependentes3Anos;if(O<3){var M=L-S;if(M<x){S=L-x;if(S<0){S=0}}}else{if(O<5){if(J<r){S=0}}else{if(J<H){S=0}}}}console.log("Imposto Final apos Minimo de Existencia: "+S);$("#impostoAPagar").val(S.formatMoney(2)+" €");$("#taxaEfectiva").val(((S/L)*100).toFixed(2)+" %");$("#totalLiquido").val((L-S).formatMoney(2)+" €");return S},calcRendColectavel=function(){return calcRendColectavelCatA(rendimentoDependente)+calcRendColectavelCatB(rendimentoIndependente)+calcRendColectavelCatE(rendimentoCapital)+calcRendColectavelCatF(rendimentoPredial)+calcRendColectavelCatH(rendimentoPensoes)},calcRendColectavelCatA=function(J){if(J<=j){return 0}else{return parseFloat(J)-j}},calcRendColectavelCatB=function(L){if(L<=0){return 0}else{J=parseFloat(L);if(propriedadeIntelectual){var J=0;var K=L*0.5;if(K>m){K=m}J=parseFloat(L)-K}return J*C}},calcRendColectavelCatE=function(K){perdasCapitais=0;if(K<=0){return 0}else{var J=parseFloat(K)-parseFloat(perdasCapitais);if(J<0){return 0}else{return J}}},calcRendColectavelCatF=function(K){if(K<=0){return 0}else{var J=K-condominios-obras-impostoMunicipalImoveis;if(J<=0){return 0}else{return J}}},calcRendColectavelCatH=function(J){if(J<=j){return 0}else{return parseFloat(J)-j}},calcTaxaSolidariedadeDevida=function(K){var J;if(K>a&&K<=I){console.log("Taxa de Solidariedade 1");J=(K-a)*g;console.log(J);return J}else{if(K>I){console.log("Taxa de Solidariedade 2");J=((K-I)*e)+b;console.log(J);return J}else{return 0}}},calcQuocienteFamiliar=function(){return numContribuintes},calcImposto=function(K){var J;if(K<=0){console.log("Nao paga imposto");return 0}if(K<=q){console.log("escalao1");J=(K*i);console.log(J);return J}else{if(K>q&&K<=o){console.log("escalao2");J=(((K-q)*B)+v);console.log(J);return J}else{if(K>o&&K<=n){console.log("escalao3");J=(((K-o)*(F+u))+v+z);return J}else{if(K>n&&K<=k){console.log("escalao4");J=(((K-n)*(l+t))+v+z+G+w);return J}else{if(K>k){console.log("escalao5");J=(((K-k)*(D+s))+v+z+G+c+w+y);return J}}}}}},calcDeducoesTotal=function(K){var L=calcDespesasSaude(despesasSaude);var N=calcDespesasEducacao(despesasEducacao);var P=calcDespesasIVA(despesasIVA);var M=calcDespesasGerais(despesasGerais);var O=calcDeducoesDependentes();var Q=calcDeducoesAscendentes();var R=calcLimiteDeducoes(K);var J=L+N+P;if(J>R&&R>0){J=R}return M+O+Q+J},calcDespesasSaude=function(L){var M=0.15;var K=1000;var J=L*M;if(J<K){return J}else{return K}},calcDespesasEducacao=function(M){var L=0.3;var K=800;var J=M*L;if(J<K){return J}else{return K}},calcDespesasGerais=function(K){var M=0.35;var L=0.45;var N=250;var O=335;var J;if(familiaMonoparental){J=K*L;if(J<O){return J}else{return O}}else{J=K*M;if(J<(N*numContribuintes)){return J}else{return N*numContribuintes}}},calcDespesasIVA=function(L){var M=0.15;var K=250;var J=L*M;if(J<K){return J}else{return K}},calcDeducoesDependentes=function(){var K=dependentes3Anos*E;var J=dependentes*h;return K+J},calcDeducoesAscendentes=function(){if(ascendentes>1){return A*ascendentes}else{return f*ascendentes}},calcLimiteDeducoes=function(K){var J=-1;if(K<=q){return J}else{if(K>q&&K<=k){J=1000+(1500*(k-K))/(k-q)}else{J=1000}}if(dependentes>=3){J+=J*(0.05*dependentes)}return J},calcColectaLiquida=function(K,J){return K-J};return{algoritmo:algoritmo}}();